# μΈν„°νμ΄μ¤λ” κµ¬ν„ν•λ” μ½μ„ μƒκ°ν•΄ μ„¤κ³„ν•λΌ
> `Java 8` μ΄μ „μ—λ” κΈ°μ΅΄ κµ¬ν„μ²΄λ¥Ό κΉ¨λ¨λ¦¬μ§€ μ•κ³ λ” μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  λ°©λ²•μ΄ μ—†μ—μ§€λ§, <br>
`Java 8` λ¶€ν„°λ” λ””ν΄νΈ λ©”μ†λ“λ¥Ό ν†µν•΄ μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ΄ κ°€λ¥ν•΄μ΅λ‹¤.

```java
public interface MyInterface {
    public void method1();
}

// MyClass.java
public class MyClass implements MyInterface {
    @Override
    public void method1() {
    }
}
```
μ›λλ” μ„μ™€ κ°™μ΄ μ½”λ“λ¥Ό μ‘μ„±ν•μ—¬ μΈν„°νμ΄μ¤μ κµ¬ν„μ²΄κ°€ ν•λ² μ •μλκ³  λ‚λ©΄ μΈν„°νμ΄μ¤μ— λ©”μ†λ“λ¥Ό μƒλ΅ μ¶”κ°€ν•κΈ° μ–΄λ ¤μ› λ‹¤. <br>
ν•μ§€λ§ `Java 8` λ¶€ν„°λ” λ””ν΄νΈ λ©”μ†λ“ λ•λ¶„μ— κµ¬ν„μ²΄μ μμ • μ—†μ΄λ„ μΈν„°νμ΄μ¤μ— μƒλ΅μ΄ λ©”μ†λ“λ¥Ό μ¶”κ°€ν•  μ μμ–΄μ΅λ‹¤. <br>

```java
public interface MyInterface {
    public void method1();
	
    default public void method2() {
        System.out.println("κΈ°λ³Έ κµ¬ν„");
    }
}
```

`java 8` λ¶€ν„°λ” `default` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•λ©΄ μΈν„°νμ΄μ¤μ λ©”μ†λ“μ—λ„ κµ¬ν„λ‚΄μ©μ΄ λ‹΄κΉ€ λΈν†µμ„ μ •μν•  μ μλ‹¤. <br>
κ·Έ μ΄λ¦„μ²λΌ `default` λ©”μ†λ“λ¥Ό κµ¬ν„μ²΄ ν΄λμ¤μ—μ„ μ¬μ •μ ν•μ§€ μ•μΌλ©΄ κΈ°λ³Έ κµ¬ν„ λ‚΄μ©μ΄ λ™μ‘ν•λ‹¤. <br>

## π“ κµ¬ν„μ²΄ ν΄λμ¤ κ°λ°μλ” default λ©”μ†λ“ μ¶”κ°€μ— μ†μλ¬΄μ±…μ΄λ‹¤
```java
// Java 8 λ¶€ν„° Collection μΈν„°νμ΄μ¤μ— removeIf λ©”μ†λ“κ°€ μ¶”κ°€λμ—λ‹¤.
public interface Collection<E> extends Iterable<E> {
    ....
    default boolean removeIf(Predicate<? super E> filter) {
        Objects.requireNonNull(filter);
        boolean removed = false;
        final Iterator<E> each = iterator();
        while (each.hasNext()) {
            if (filter.test(each.next())) {
                each.remove();
                removed = true;
            }
        }
        return removed;
    }
    ....
}
```

`Collection` μΈν„°νμ΄μ¤λ” μλ°”μ μ—¬λ¬κ³³μ—μ„ κµ¬ν„λμ–΄ μ‚¬μ©λκ³  μμ—κΈ° λ•λ¬Έμ— `default` λ©”μ†λ“κ°€ μ—†μ—λ‹¤λ©΄ μλ§μ€ κµ¬ν„μ²΄λ“¤μ΄ μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•κ³  μ½”λ“λ¥Ό μμ •ν•΄μ•Ό ν–μ„ κ²ƒμ΄λ‹¤.  <br>
`default` λ©”μ†λ“λ¥Ό ν†µν•΄ κΈ°λ³Έ λ™μ‘ μ½”λ“λ¥Ό μ •μν•΄λ‘μ—κΈ° λ•λ¬Έμ— ν° λ¬Έμ  μ—†μ΄ μΈν„°νμ΄μ¤μ— λ©”μ†λ“λ¥Ό μƒλ΅ μ¶”κ°€ν•  μ μμ—λ‹¤. <br>

## π“ λ©€ν‹°μ¤λ λ“ ν™κ²½μ—μ„μ μ—λ¬
```java
List<Integer> list = new ArrayList<>();
for(Integer i = 0; i < 10000000; i++) {
	list.add(i);
}
Collection<Integer> col = SynchronizedCollection.synchronizedCollection(list);

// Collectionμ κµ¬ν„μ²΄μΈ SynchronizedCollection κ°μ²΄λ¥Ό λ§λ“¤κ³ 
// t1, t2μ—μ„ λ™μ‹μ— removeIf λ©”μ†λ“λ¥Ό νΈμ¶ν•λ‹¤.
Thread t1 = new Thread(new Test(col));
Thread t2 = new Thread(new Test(col));
t1.start();
t2.start();
```
`SynchronizedCollection` λ” λ©€ν‹°μ¤λ λ“ ν™κ²½μ—μ„ μ‚¬μ©κ°€λ¥ν• `Collection` κµ¬ν„μ²΄μ΄λ‹¤. <br>
λ©€ν‹°μ¤λ λ“μ—μ„ μ•μ „ν•κ² λ™μ‘ν•λ„λ΅ λ§λ“¤μ–΄μ§„ ν΄λμ¤μΈλ° λ©€ν‹°μ¤λ λ“μ—μ„ `removeIf` λ¥Ό νΈμ¶ν•μ€λ”λ‹ `ConcurrentModificationException` μμ™Έκ°€ λ°μƒν•μ€λ‹¤. <br>

<br>
μ„μ™€ κ°™μ€ μ—λ¬λ” κ³Όμ—° κ°λ°μμ μλ»μΌκΉ...??? <br>
<br>

μ•„λ‹λ‹¤. `SynchronizedCollection` ν΄λμ¤λ¥Ό λ§λ“¤ λ‹Ήμ‹μ—λ” `Collection` μΈν„°νμ΄μ¤μ— `removeIf` λ©”μ†λ“λ” μ—†μ—λ‹¤. <br>
μ΄ν›„μ— `SynchronizedCollection` ν΄λμ¤μ κ°λ°μλ„ λ¨λ¥΄κ² `removeIf` λ©”μ†λ“κ°€ μ¶”κ°€λ κ²ƒμ΄λ‹¤. <br>
μ΄μ²λΌ `default` λ©”μ†λ“λ¥Ό μΈν„°νμ΄μ¤μ— μ¶”κ°€ν•  λ•λ” κµ¬ν„μ²΄ ν΄λμ¤μ— μλ„μΉ μ•μ€ λ¬Έμ κ°€ μƒκΈΈ μ μμμ„ κ³ λ ¤ν•΄μ•Όν•λ‹¤. <br>
