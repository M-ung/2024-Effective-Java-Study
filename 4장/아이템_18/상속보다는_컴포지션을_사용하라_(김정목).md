# ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ë¼
ìƒì†ì€ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê°•ë ¥í•œ ìˆ˜ë‹¨ì´ì§€ë§Œ, í•­ìƒ ìµœì„ ì€ ì•„ë‹ˆë‹¤. ì¼ë°˜ì ì¸ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ íŒ¨í‚¤ì§€ ê²½ê³„ë¥¼ ë„˜ì–´ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì˜ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ëŠ” ì¼ì€ ìœ„í—˜í•˜ë‹¤. <br>

## ğŸ“Œ ë©”ì„œë“œ í˜¸ì¶œê³¼ëŠ” ë‹¬ë¦¬ ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨ëœ¨ë¦°ë‹¤.
- ìƒìœ„ í´ë˜ìŠ¤ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠëƒì— ë”°ë¼ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë™ì‘ì— ì´ìƒì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
- ìƒìœ„ í´ë˜ìŠ¤ëŠ” ë¦´ë¦¬ìŠ¤ë§ˆë‹¤ ë‚´ë¶€ êµ¬í˜„ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ê·¸ ì—¬íŒŒë¡œ ì½”ë“œ í•œ ì¤„ ê±´ë“œë¦¬ì§€ ì•Šì€ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì˜¤ë™ì‘í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ëŠ” ìƒì†ì˜ ì˜ëª»ëœ ì˜ˆë¥¼ ë³´ì—¬ì£¼ëŠ” ì½”ë“œì´ë‹¤. <br>

```java
public class InstrumentedHashSetUseExtends<E> extends HashSet {
    private int addCount = 0; // ì¶”ê°€ëœ ì›ì†Œì˜ ìˆ˜

    public InstrumentedHashSetUseExtends() {
    }

    public InstrumentedHashSetUseExtends(int initCap, float loadFactor) {
        super(initCap, loadFactor);
    }

    @Override
    public boolean add(Object o) {
        return super.add(o);
    }

    @Override
    public boolean addAll(Collection c) {
        return super.addAll(c);
    }

    public int getAddCount() {
        return addCount;
    }
}
```
<br>

ìœ„ ì½”ë“œì—ì„œ addAll ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. <br>

```java
public class HashSet<E> extends AbstractSet<E> implements Set<E>, Cloneable, java.io.Serializable {
    // ...

    public HashSet(Collection<? extends E> c) {
        map = new HashMap<>(Math.max((int) (c.size() / .75f) + 1, 16));
        addAll(c); // superì˜ addAll ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
    }

    // ...
}
```
```java
public abstract class AbstractCollection<E> implements Collection<E> {
    // ...

    public boolean addAll(Collection<? extends E> c) {
        boolean modified = false;
        for (E e : c)
            if (add(e))
                modified = true;
        return modified;
    }

    // ...
}
```

ìœ„ ì½”ë“œì˜ íë¦„ì€ ì•„ë˜ì™€ ê°™ë‹¤. <br>
1. HashSetì˜ addAll ë©”ì„œë“œëŠ” add ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ êµ¬í˜„ë˜ì–´ ìˆë‹¤. <br>
2. InstrumentedHashSetUseExtendsì˜ addAllì€ addCountë¥¼ ë”í•œ í›„, HashSetì˜ addAllì„ í˜¸ì¶œí•œë‹¤. <br>
3. HashSetì˜ addAllì€ ê° ì›ì†Œë¥¼ add ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ì¶”ê°€í•˜ëŠ”ë°, ì´ë•Œ ë¶ˆë¦¬ëŠ” addëŠ” InstrumentedHashSetUseExtendsì—ì„œ ì¬ì •ì˜í•œ ë©”ì„œë“œë‹¤. <br>
4. ë”°ë¼ì„œ addCountì˜ ê°’ì´ ì¤‘ë³µìœ¼ë¡œ ë”í•´ì§€ê²Œ ëœë‹¤. <br>

 <br>

ìœ„ì™€ ê°™ì€ ê²½ìš°ëŠ” addAll ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ ê³ ì¹  ìˆ˜ ìˆëŠ” ë¬¸ì œì´ë‹¤. `í•˜ì§€ë§Œ HashSetì˜ addAllì´ add ë©”ì„œë“œë¥¼ ì´ìš©í•´ êµ¬í˜„í–ˆìŒì„ ê°€ì •í•œ í•´ë²•ì´ë¼ëŠ” í•œê³„ë¥¼ ê°€ì§„ë‹¤.` <br>

<br>

ë‹¤ìŒ ë¦´ë¦¬ìŠ¤ì—ì„œ ìƒìœ„ í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤ë©´? ì–´ë–»ê²Œ ë ê¹Œ? <br>
ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ë©”ì„œë“œë¥¼ í†µí•´ì„œ í—ˆìš©ë˜ì§€ ì•Šì€ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë  ìˆ˜ë„ ìˆë‹¤. ë˜ ë§Œì•½ í•˜ìœ„ í´ë˜ìŠ¤ì— ì¶”ê°€í•œ ë©”ì„œë“œì™€ ìƒìœ„ í´ë˜ìŠ¤ì— ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ë©”ì„œë“œì˜ ì‹œê·¸ë‹ˆì²˜ê°€ ê°™ê³  ë°˜í™˜ íƒ€ì…ì´ ë‹¤ë¥´ë‹¤ë©´ ì»´íŒŒì¼ì¡°ì°¨ ë˜ì§€ ì•ŠëŠ”ë‹¤.

<br>

ê·¸ë ‡ë‹¤ë©´ ìœ„ ë¬¸ì œì ì„ ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ? <br>

## ğŸ“Œ í•´ê²° ë°©ë²•
- ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ëŒ€ì‹ , ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  private í•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê²Œ í•˜ë©´ ëœë‹¤.
- ìƒˆ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë“¤ì€ (private í•„ë“œë¡œ ì°¸ì¡°í•˜ëŠ”) ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ëŒ€ì‘í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

ì•„ë˜ ì½”ë“œëŠ” ìƒì†ëŒ€ì‹  ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í–ˆë‹¤. <br>

```java
public class InstrumentedHashSetUseComposition<E> extends ForwardingSet<E> {
    private int addCount = 0;

    public InstrumentedHashSetUseComposition(Set<E> s) {
        super(s);
    }

    @Override
    public boolean add(E e) {
        addCount++;
        return super.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        addCount += c.size();
        return super.addAll(c);
    }

    public int getAddCount() {
        return addCount;
    }
}
```
```java
public class ForwardingSet<E> implements Set<E> {
    private final Set<E> s;

    public ForwardingSet(Set<E> s) {
        this.s = s;
    }

    public int size() {
        return 0;
    }

    public boolean isEmpty() {
        return s.isEmpty();
    }

    public boolean contains(Object o) {
        return s.contains(o);
    }

    public Iterator<E> iterator() {
        return s.iterator();
    }

    public Object[] toArray() {
        return s.toArray();
    }

    public <T> T[] toArray(T[] a) {
        return s.toArray(a);
    }

    public boolean add(E e) {
        return s.add(e);
    }

    public boolean remove(Object o) {
        return s.remove(o);
    }

    public boolean containsAll(Collection<?> c) {
        return s.containsAll(c);
    }

    public boolean addAll(Collection<? extends E> c) {
        return s.addAll(c);
    }

    public boolean retainAll(Collection<?> c) {
        return s.retainAll(c);
    }

    public boolean removeAll(Collection<?> c) {
        return s.removeAll(c);
    }

    public void clear() {
        s.clear();
    }

    @Override
    public boolean equals(Object o) {
        return s.equals(o);
    }

    @Override
    public int hashCode() {
        return s.hashCode();
    }

    @Override
    public String toString() {
        return s.toString();
    }
}
```

<br>

ìƒì† ë°©ì‹ì€ êµ¬ì²´ í´ë˜ìŠ¤ ê°ê°ì„ ë”°ë¡œ í™•ì¥í•´ì•¼ í•˜ë©°, ì§€ì›í•˜ê³  ì‹¶ì€ ìƒìœ„ í´ë˜ìŠ¤ì˜ ìƒì„±ì ê°ê°ì— ëŒ€ì‘í•˜ëŠ” ìƒì„±ìë¥¼ ë³„ë„ë¡œ ì •ì˜í•´ì¤˜ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ì»´í¬ì§€ì…˜ ë°©ì‹ì€ í•œ ë²ˆë§Œ êµ¬í˜„í•´ë‘ë©´ ì–´ë– í•œ Set êµ¬í˜„ì²´ë¼ë„ ê³„ì¸¡í•  ìˆ˜ ìˆìœ¼ë©°, ê¸°ì¡´ ìƒì„±ìë“¤ê³¼ë„ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. <br>

## ğŸ“Œ ìƒì†ê³¼ is-a
- ìƒì†ì€ ë°˜ë“œì‹œ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒìœ„ í´ë˜ìŠ¤ì˜ 'ì§„ì§œ' í•˜ìœ„ íƒ€ì…ì¸ ìƒí™©ì—ì„œë§Œ ì“°ì—¬ì•¼ í•œë‹¤.
- ì¦‰, í´ë˜ìŠ¤ Bê°€ í´ë˜ìŠ¤ Aì™€ is-a ê´€ê³„ì¼ ë•Œë§Œ í´ë˜ìŠ¤ Aë¥¼ ìƒì†í•´ì•¼ í•œë‹¤.
- ë§Œì•½ is-a ê´€ê³„ê°€ ì•„ë‹ˆë¼ë©´ AëŠ” Bì˜ í•„ìˆ˜ êµ¬ì„±ìš”ì†Œê°€ ì•„ë‹ˆë¼ êµ¬í˜„í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì¼ ë¿ì´ë‹¤.

## ğŸ“Œ ìƒì†í•  ë•Œ ì£¼ì˜í•  ì 
- ì»´í¬ì§€ì…˜ì„ ì¨ì•¼ í•  ìƒí™©ì—ì„œ ìƒì†ì„ ì‚¬ìš©í•˜ëŠ” ê±´ ë‚´ë¶€ êµ¬í˜„ì„ ë¶ˆí•„ìš”í•˜ê²Œ ë…¸ì¶œí•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤.
- ìƒì†ì€ ìƒìœ„ í´ë˜ìŠ¤ì˜ APIë¥¼ 'ê·¸ ê²°í•¨ê¹Œì§€ë„' ìŠ¹ê³„í•˜ë¯€ë¡œ ì£¼ì˜í•´ì•¼ í•œë‹¤.

## â­ï¸ í•µì‹¬ ì •ë¦¬
- ìƒì†ì€ ê°•ë ¥í•˜ì§€ë§Œ ìº¡ìŠí™”ë¥¼ í•´ì¹œë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.
- ìƒì†ì€ ìƒìœ„ í´ë˜ìŠ¤ì™€ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìˆœìˆ˜í•œ is-a ê´€ê³„ì¼ ë•Œë§Œ ì¨ì•¼ í•œë‹¤.
- ìƒì†ì˜ ì·¨ì•½ì ì„ í”¼í•˜ë ¤ë©´ ìƒì† ëŒ€ì‹  ì»´í¬ì§€ì…˜ê³¼ ì „ë‹¬ì„ ì‚¬ìš©í•œë‹¤. íŠ¹íˆ ë˜í¼ í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•  ì ë‹¹í•œ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆë‹¤ë©´ ë”ìš± ê·¸ë ‡ë‹¤. ë˜í¼ í´ë˜ìŠ¤ëŠ” í•˜ìœ„ í´ë˜ìŠ¤ë³´ë‹¤ ê²¬ê³ í•˜ê³  ê°•ë ¥í•˜ë‹¤.
