# ë°˜í™˜ íƒ€ì…ìœ¼ë¡œëŠ” ìŠ¤íŠ¸ë¦¼ë³´ë‹¤ ì»¬ë ‰ì…˜ì´ ë‚«ë‹¤

## Java8 ì´í›„ ì›ì†Œ ë°˜í™˜í•˜ê¸°
stream ì€ ë°˜ë³µì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ ê·¸ë˜ì„œ ìŠ¤íŠ¸ë¦¼ê³¼ ë°˜ë³µì„ ì•Œë§ê²Œ ì¡°í•©í•´ì•¼ ì¢‹ì€ ì½”ë“œê°€ ë‚˜ì˜¨ë‹¤.

WHY?

â†’ stream ì´ **Iterable** í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤

```java
Stream<String> stream = Stream.of("a", "b", "c");

// ì—ëŸ¬ë°œìƒ
for (String s : stream) {
    System.out.println(s);
}
```

ë¦¬ìŠ¤íŠ¸ë‚˜ ë°°ì—´ ë“±ì˜ Iterable í•œ ìë£Œêµ¬ì¡°ë¡œ ë³€í™˜í•´ì•¼ í•œë‹¤

```java
Stream<String> stream = Stream.of("a", "b", "c");

// ìŠ¤íŠ¸ë¦¼ì„ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
List<String> list = stream.collect(Collectors.toList());

for (String s : list) {
    System.out.println(s);
}
```

## ğŸ¤” ì™œ stream ì— Iterable ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ê°€?
```java
public void processHandleTest2() {
    // ë¶ˆí¸í•œ ìˆ˜ë™ ìºìŠ¤íŒ… í•„ìš”
    Iterable<ProcessHandle> processHandles = ProcessHandle.allProcesses()::iterator;

    for (ProcessHandle processHandle : processHandles) {
        System.out.println("processHandle = " + processHandle.info());
    }
}
```

* ìŠ¤íŠ¸ë¦¼ ë’¤ì— ::iterator ë„£ì–´ë„ íƒ€ì…ì„ ì¶”ë¡ í•´ì£¼ì§€ ì•ŠëŠ”ë‹¤
    * Runnable, Executable ê³¼ ê°™ì€ íƒ€ì…ì„ ì¶”ì²œí•´ì¤€ë‹¤
* Javaì˜ forEach ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë©´ ìŠ¤íŠ¸ë¦¼ì„ ê¹”ë”í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
* ì• ì´ˆì— ë°˜í™˜ íƒ€ì…ì„ collect() ë©”ì„œë“œë¥¼ í†µí•´ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë³€ê²½í•˜ì

## ì–´ëŒ‘í„° ë©”ì„œë“œ
```java
public static <E> Iterable<E> iterableOf(Stream<E> stream) {
    return stream::iterator;
}

public static <E> Stream<E> streamOf(Iterable<E> iterable) {
    return StreamSupport.stream(iterable.spliterator(), false);
}
```

* iterableOf() ì™€ streamOf() ë¥¼ ì‚¬ìš©í•´ ë‘ê°€ì§€ ì–´ëŒ‘í„° ë©”ì„œë“œë¡œ íƒ€ì…ì„ ì‰½ê²Œ ì˜¤ê°ˆ ìˆ˜ ìˆê²Œ í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤
* Collection ì¸í„°í˜ì´ìŠ¤ëŠ” stream() ê³¼ Iterable ì„ ë‘˜ ë‹¤ êµ¬í˜„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Collection ì´ë‚˜ í•˜ìœ„ íƒ€ì…ì„ ë°˜í™˜ í˜¹ì€ íŒŒë¼ë¯¸í„° íƒ€ì…ì— ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ë‹¤
* Collection ì„ ë°˜í™˜í•œë‹¤ëŠ” ì´ìœ ë¡œ í° ì‹œí€€ìŠ¤ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ë©´ ì•ˆëœë‹¤
    * ì‹œí€€ìŠ¤ê°€ í¬ì§€ë§Œ, í‘œí˜„ ë°©ì‹ì´ ê°„ë‹¨í•´ ì§ˆ ê°€ëŠ¥ì„±ì´ ìˆë‹¤ë©´ ì „ìš© ì»¬ë ‰ì…˜ì„ êµ¬í˜„í•˜ì

```java
void streamIterableTest() {
    Stream<ProcessHandle> handleStream = ProcessHandle.allProcesses();
    handleStream.forEach(p -> System.out.println(p.info()));

    Iterable<ProcessHandle> handles = iterableOf(handleStream);

    for (ProcessHandle handle : handles) {
        System.out.println(handle.info());
    }

    Stream<ProcessHandle> stream = streamOf(handles);
    stream.forEach(p -> System.out.println(p.info()));
}
```

ìœ„ ì½”ë“œì²˜ëŸ¼ `Stream` â†’ `Iterable` â†’ `Stream` ìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤

## ğŸ¤” ì–¸ì œ Collection íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?
### ë©±ì§‘í•©
: ëª¨ë“  ë¶€ë¶„ ì§‘í•©ì„ ì›ì†Œë¡œ ê°€ì§€ëŠ” ì§‘í•©

```java
static class PowerSet {
    public static final <E> Collection<Set<E>> of(Set<E> s) {
        List<E> src = new ArrayList<>(s);
        // 30ìœ¼ë¡œ ì œí•œí•˜ëŠ” ì´ìœ ëŠ” Integer.MAX_VALUEì˜ ë²”ìœ„ê°€ 2^31 - 1ì´ê¸° ë•Œë¬¸ì´ë‹¤.
        int numberOfMaximumElements = 30;

        if(src.size() > numberOfMaximumElements){
            throw new IllegalArgumentException("ì§‘í•©ì— ì›ì†Œê°€ ë„ˆë¬´ ë§ìŠµë‹ˆë‹¤. (ìµœëŒ€ " + numberOfMaximumElements + " ê°œ)");
        }

        return new AbstractList<>() {
            @Override
            public Set<E> get(int index) {
                Set<E> result = new HashSet<>();

                for (int i = 0; index != 0; i++, index >>= 1) {
                    if ((index & 1) == 1) {
                        result.add(src.get(i));
                    }
                }

                return result;
            }

            @Override
            public int size() {
                // ë©±ì§‘í•©ì˜ í¬ê¸°ëŠ” 2ë¥¼ ì›ë˜ ì§‘í•© ì›ì†Œ ìˆ˜ë§Œí¼ ê±°ë“­ì œê³±í•œ ê²ƒê³¼ ê°™ë‹¤.
                return 1 << src.size();
            }

            @Override
            public boolean contains(Object o) {
                return o instanceof Set && src.containsAll((Set) o);
            }
        };
    }
}
```

## ğŸ¤” ì–¸ì œ Stream íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?
### ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ë¥¼ ìŠ¤íŠ¸ë¦¼ì•ë¡œ ë³€í™˜í•˜ì—¬ ì²˜ë¦¬í•˜ê¸°
```java
public class StreamExample {
    public static void main(String[] args) {
        // ì›ë³¸ ë¦¬ìŠ¤íŠ¸ ìƒì„±
        List<String> originalList = Arrays.asList("Apple", "Banana", "Cherry", "Date", "Elderberry", "Fig", "Grape");

        // ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ ìƒì„± (ì¸ë±ìŠ¤ 2ë¶€í„° 5ê¹Œì§€)
        List<String> subList = originalList.subList(2, 5); // [Cherry, Date, Elderberry]

        // ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸ë¥¼ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì²˜ë¦¬
        Stream<String> subListStream = subList.stream();

        // ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ì—¬ ê° ë¬¸ìì—´ì„ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•˜ê³ , ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ë¡œ ìˆ˜ì§‘
        List<String> upperCaseList = subListStream
                .map(String::toUpperCase)  // ê° ë¬¸ìì—´ì„ ëŒ€ë¬¸ìë¡œ ë³€í™˜
                .collect(Collectors.toList());  // ê²°ê³¼ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ìˆ˜ì§‘

        // ê²°ê³¼ ì¶œë ¥
        System.out.println("ì›ë˜ ë¦¬ìŠ¤íŠ¸: " + originalList);
        System.out.println("ë¶€ë¶„ ë¦¬ìŠ¤íŠ¸: " + subList);
        System.out.println("ëŒ€ë¬¸ìë¡œ ë³€í™˜í•œ ë¦¬ìŠ¤íŠ¸: " + upperCaseList);
    }
}
```

ì´ ë¶€ë¶„ ì´í•´ê°€ ì•ˆê°‘ë‹ˆë‹¤...ë‚˜ì¤‘ì— ë‹¤ì‹œ fix ë²„ì „ìœ¼ë¡œ ì—…ë¡œë“œ í• ê²Œìš”..!!
